angular.module("mainApp",["ui.router","ngCookies","ngSanitize"]).config(function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("home",{url:"/",templateUrl:"partials/home.html",controller:"homeController",data:{requireLogin:!1}}).state("home.admin",{url:"admin",templateUrl:"partials/addchallenge.html",controller:"adminController"}).state("login",{url:"/login",templateUrl:"partials/login.html",controller:"loginController",data:{requireLogin:!1}}).state("signup",{url:"/signup",templateUrl:"partials/signup.html",controller:"signupController",data:{requireLogin:!1}}).state("challenges",{url:"/challenges",templateUrl:"partials/challenges.html",controller:"challengesController",data:{requireLogin:!0}}).state("challenges.challenge",{url:"/:title",templateUrl:"partials/challenge.html",controller:"challengeController",data:{requireLogin:!0}}).state("leaderboard",{url:"/leaderboard",templateUrl:"partials/leaderboard.html",controller:"leaderBoardController",data:{requireLogin:!1}}).state("logout",{url:"/logout",template:"<h2>Logging you out...</h2>",controller:"logoutController",data:{requireLogin:!0}})}).run(["$rootScope","$state","$cookies",function($rootScope,$state,$cookies){$rootScope.$on("$stateChangeStart",function(event,toState){$rootScope.authStatus=$cookies.get("loggedIn"),toState.data.debounce||!toState.data.requireLogin||$rootScope.authStatus?toState.data.debounce||toState.data.requireLogin||!$rootScope.authStatus||(event.preventDefault(),toState.data.debounce=!0,$state.go("home")):(toState.data.debounce=!0,event.preventDefault(),$state.go("login"))}),$rootScope.$on("$stateChangeSuccess",function(ev,state){$state.current.data.debounce=!1})}]);